{"components/cart/coupon-input":"<!-- <div class=\"cart-total-value\">\r\n\r\n    <button class=\"coupon-code-add\">{{lang 'cart.coupons.add_coupon'}}</button>\r\n\r\n    <button class=\"coupon-code-cancel\" style=\"display: none;\">{{lang 'cart.coupons.cancel'}}</button>\r\n</div> -->\r\n\r\n<div class=\"cart-form coupon-code\">\r\n  <form class=\"form form--hiddenLabels coupon-form\" method=\"post\" action=\"{{urls.cart}}\">\r\n    <label class=\"form-label\" for=\"couponcode\">{{lang 'cart.coupons.coupon_code'}}</label>\r\n    <input class=\"form-input\" data-error=\"{{lang 'cart.coupons.empty_error'}}\"  id=\"couponcode\" type=\"text\" name=\"couponcode\" value=\"\" placeholder=\"{{lang 'cart.coupons.coupon_code'}}\">\r\n    <input class=\"btn_check\" type=\"submit\" value=\"Apply\">\r\n    <div class=\"copon_data\">\r\n    <ul>\r\n    </ul>    \r\n    </div>\r\n    <input class=\"button button--primary button--small\" type=\"submit\" value=\"{{lang 'cart.coupons.button'}}\">\r\n    <input type=\"hidden\" name=\"action\" value=\"applycoupon\">\r\n</form>\r\n</div>\r\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js\"></script>\r\n<script>\r\n\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  var groupID=0;\r\n  if(document.querySelectorAll('#customer-group-id').length > 0){\r\n   groupID=document.querySelectorAll('#customer-group-id')[0].textContent;\r\n}\r\n  if(groupID.length === 0)\r\n  {\r\n    groupID=0;\r\n  }\r\n  \r\n  axios({\r\n              url: \"https://bg-sync-api-dev.kapiva.in/api/coupon.php\",\r\n              method: 'post',\r\n              contentType: \"application/json\",\r\n              headers:{'gid' : groupID},\r\n            }).then((result) => {     \r\n                var data = result.data;\r\n    if(result.status == \"fail\"){\r\n    var currentDate = new Date();\r\n   var couponBlock='';\r\n  \r\n    for(var i=0;i<data['data'].length;i++)\r\n   {\r\n      var coupons=data['data'][i];\r\n     \r\n        const value = moment(coupons['expires']).format('MM/DD/YYYY h:mm a');\r\n        var dt=new Date(value);\r\n       if(currentDate<dt)\r\n          {\r\n            couponBlock+='<label class=\"code_input\"><strong>'+coupons['code']+'</strong><br>Save '+parseInt(coupons['amount'])+'% off <br>Expires on : '+value+'  <input type=\"radio\" class=\"coupon_code\" value=\"'+coupons['code']+'\" name=\"coupon\"> <span class=\"checkmark\"></span></label>';\r\n              \r\n         }\r\n      \r\n   }\r\n   if(couponBlock != ''){\r\n   var newItem = document.querySelector('.copon_data ul');\r\n                            var node = document.createElement(\"li\");\r\n                            node.innerHTML = couponBlock;\r\n                            newItem.append(node);\r\n                          }\r\n                        }\r\n   \r\n});\r\n\r\nvar setcpninterval = setInterval(function(){\r\nvar len = document.querySelectorAll('.coupon_code').length;\r\nif(len > 0){\r\n  clearInterval(setcpninterval)\r\n  document.querySelectorAll('.coupon_code').forEach(item => {\r\n            item.addEventListener('click', function (e) {\r\n \r\n    \r\n     document.querySelectorAll('.coupon_code').forEach(couponremove => {\r\n      couponremove.removeAttribute(\"checked\");\r\n     });\r\n      if(item.classList.contains(\"checked\")) {\r\n        e.preventDefault(); \r\n      document.getElementById('couponcode').value = '';\r\n      item.removeAttribute(\"checked\");\r\n      item.classList.remove(\"checked\");\r\n     }else{\r\n      var code=document.querySelector('.coupon_code:checked').value;\r\n      document.getElementById('couponcode').value = code;\r\n      document.querySelectorAll('.coupon_code').forEach(couponremove => {\r\n      couponremove.classList.contains(\"checked\");\r\n     });\r\n     item.classList.add(\"checked\");\r\n     item.setAttribute(\"checked\",\"checked\");\r\n    }\r\n  });\r\n});\r\n}\r\nsetTimeout(function(){\r\n  clearInterval(setcpninterval)\r\n},9000)\r\n},1000);\r\n});\r\ndocument.querySelectorAll('#couponcode').forEach(track_input => {\r\n            track_input.onkeyup = function(e) {\r\n              var code=document.querySelector('.coupon_code:checked').value;\r\n              document.querySelectorAll('.coupon_code').forEach(item => {\r\n        var input = document.getElementById('couponcode').value;\r\n     \r\n        if(item.value != input){\r\n      document.querySelectorAll(\".coupon_code\")[0].removeAttribute(\"checked\");\r\n      document.querySelectorAll(\".coupon_code\")[0].classList.remove(\"checked\");\r\n        }else{\r\n          \r\n            if(input == item.value){\r\n              \r\n              item.classList.add(\"checked\");\r\n              item.setAttribute(\"checked\",\"checked\");\r\n             return false;\r\n            }\r\n        }\r\n      }) \r\n            };\r\n          });\r\n\r\n</script>\r\n\r\n\r\n\r\n"}
