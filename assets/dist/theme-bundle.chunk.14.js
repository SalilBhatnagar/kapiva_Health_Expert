(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[14],{

/***/ "./assets/js/theme/checkout.js":
/*!*************************************!*\
  !*** ./assets/js/theme/checkout.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Checkout; });
/* harmony import */ var _page_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./page-manager */ "./assets/js/theme/page-manager.js");
/* harmony import */ var _bigcommerce_checkout_sdk__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/checkout-sdk */ "./node_modules/@bigcommerce/checkout-sdk/dist/checkout-sdk.js");
/* harmony import */ var _bigcommerce_checkout_sdk__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_bigcommerce_checkout_sdk__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.min.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _common_models_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common/models/forms */ "./assets/js/theme/common/models/forms.js");
/* harmony import */ var _common_nod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common/nod */ "./assets/js/theme/common/nod.js");
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = "function" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || "@@iterator", asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator", toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, ""); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, "_invoke", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: "normal", arg: fn.call(obj, arg) }; } catch (err) { return { type: "throw", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { ["next", "throw", "return"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if ("throw" !== record.type) { var result = record.arg, value = result.value; return value && "object" == typeof value && hasOwn.call(value, "__await") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke("next", value, resolve, reject); }, function (err) { invoke("throw", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke("throw", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, "_invoke", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = "suspendedStart"; return function (method, arg) { if ("executing" === state) throw new Error("Generator is already running"); if ("completed" === state) { if ("throw" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if ("next" === context.method) context.sent = context._sent = context.arg;else if ("throw" === context.method) { if ("suspendedStart" === state) throw state = "completed", context.arg; context.dispatchException(context.arg); } else "return" === context.method && context.abrupt("return", context.arg); state = "executing"; var record = tryCatch(innerFn, self, context); if ("normal" === record.type) { if (state = context.done ? "completed" : "suspendedYield", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } "throw" === record.type && (state = "completed", context.method = "throw", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, "throw" === methodName && delegate.iterator["return"] && (context.method = "return", context.arg = undefined, maybeInvokeDelegate(delegate, context), "throw" === context.method) || "return" !== methodName && (context.method = "throw", context.arg = new TypeError("The iterator does not provide a '" + methodName + "' method")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if ("throw" === record.type) return context.method = "throw", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, "return" !== context.method && (context.method = "next", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = "throw", context.arg = new TypeError("iterator result is not an object"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = "normal", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: "root" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if ("function" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, "GeneratorFunction"), exports.isGeneratorFunction = function (genFun) { var ctor = "function" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || "GeneratorFunction" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, "GeneratorFunction")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, "Generator"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, "toString", function () { return "[object Generator]"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = "next", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { "t" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if ("throw" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = "throw", record.arg = exception, context.next = loc, caught && (context.method = "next", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if ("root" === entry.tryLoc) return handle("end"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, "catchLoc"), hasFinally = hasOwn.call(entry, "finallyLoc"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error("try statement without catch or finally"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, "finallyLoc") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && ("break" === type || "continue" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = "next", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if ("throw" === record.type) throw record.arg; return "break" === record.type || "continue" === record.type ? this.next = record.arg : "return" === record.type ? (this.rval = this.arg = record.arg, this.method = "return", this.next = "end") : "normal" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, "catch": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if ("throw" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error("illegal catch attempt"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, "next" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }
function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }





var win = window,
  listeners = [],
  doc = win.document,
  MutationObserver = win.MutationObserver || win.WebKitMutationObserver,
  observer,
  _this;
var service = Object(_bigcommerce_checkout_sdk__WEBPACK_IMPORTED_MODULE_1__["createCheckoutService"])();
var Checkout = /*#__PURE__*/function (_PageManager) {
  _inheritsLoose(Checkout, _PageManager);
  function Checkout() {
    return _PageManager.apply(this, arguments) || this;
  }
  var _proto = Checkout.prototype;
  _proto.onReady = /*#__PURE__*/function () {
    var _onReady = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
      var script;
      return _regeneratorRuntime().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _this = this;
              // const state = await service.loadCheckout();
              // var get_checkout = state.data.getCheckout();
              // console.log('get_checkout', get_checkout);
              // var grandTotal = get_checkout.grandTotal;
              script = document.createElement('script');
              script.src = "https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js";
              document.head.appendChild(script);
              this.ready('.layout-cart .cart.optimizedCheckout-orderSummary', function (element) {
                var groupID = jquery__WEBPACK_IMPORTED_MODULE_2___default()('#customer-group-id').text();
                if (groupID.length === 0) {
                  groupID = 0;
                }
                var selectorDiv = jquery__WEBPACK_IMPORTED_MODULE_2___default()('.layout-cart [data-test=redeemable-collapsable]');
                _this.getCoupons(groupID, selectorDiv);
                jquery__WEBPACK_IMPORTED_MODULE_2___default()('.layout-cart [data-test=redeemable-collapsable] .redeemable-entry .optimizedCheckout-form-input').attr('id', 'cartLayoutInput');
                jquery__WEBPACK_IMPORTED_MODULE_2___default()(document).on("click", ".layout-cart [data-test=redeemable-collapsable] input[name=coupon]", function (e) {
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()("input[name=coupon]").removeAttr("checked");
                  if (jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).hasClass("checked")) {
                    e.preventDefault();
                    jquery__WEBPACK_IMPORTED_MODULE_2___default()(".optimizedCheckout-form-input").val('');
                    jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).removeAttr("checked");
                    jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).removeClass("checked");
                  } else {
                    var code = jquery__WEBPACK_IMPORTED_MODULE_2___default()('input[name=coupon]:checked').val();
                    var couponInput = document.getElementById('cartLayoutInput');
                    _this.setNativeValue(couponInput, code);
                    couponInput.dispatchEvent(new Event('input', {
                      bubbles: true
                    }));
                    jquery__WEBPACK_IMPORTED_MODULE_2___default()("input:radio[name=coupon]").removeClass("checked");
                    jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).addClass("checked");
                    jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).attr("checked", true);
                  }
                });
              });
              this.ready('.checkout-form .form-fieldset ul.form-checklist', function (element) {
                var groupID = jquery__WEBPACK_IMPORTED_MODULE_2___default()('#customer-group-id').text();
                if (groupID.length === 0) {
                  groupID = 0;
                }
                var selectorDiv = jquery__WEBPACK_IMPORTED_MODULE_2___default()('.checkout-form .form-fieldset.redeemable-payments [data-test=redeemable-collapsable]');
                _this.getCoupons(groupID, selectorDiv);
                jquery__WEBPACK_IMPORTED_MODULE_2___default()('.checkout-form [data-test=redeemable-collapsable] .redeemable-entry .optimizedCheckout-form-input').attr('id', 'paymentStepInput');
                jquery__WEBPACK_IMPORTED_MODULE_2___default()(document).on("click", ".checkout-form .form-body [data-test=redeemable-collapsable] input[name=coupon]", function (e) {
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()("input[name=coupon]").removeAttr("checked");
                  if (jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).hasClass("checked")) {
                    e.preventDefault();
                    jquery__WEBPACK_IMPORTED_MODULE_2___default()(".optimizedCheckout-form-input").val('');
                    jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).removeAttr("checked");
                    jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).removeClass("checked");
                  } else {
                    jquery__WEBPACK_IMPORTED_MODULE_2___default()("input:radio[name=coupon]").removeClass("checked");
                    jquery__WEBPACK_IMPORTED_MODULE_2___default()('.form-body').find('input[name=coupon]:checked').addClass("checked");
                    jquery__WEBPACK_IMPORTED_MODULE_2___default()('.form-body').find('input[name=coupon]:checked').attr("checked", true);
                    var code = jquery__WEBPACK_IMPORTED_MODULE_2___default()('.form-body').find('input[name=coupon]:checked').val();
                    var couponInput = document.getElementById('paymentStepInput');
                    _this.setNativeValue(couponInput, code);
                    couponInput.dispatchEvent(new Event('input', {
                      bubbles: true
                    }));
                  }
                });
              });
              this.ready('.cartDrawer', function (element) {
                var couponInputLengthInterval = '';
                setTimeout(function () {
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()('.cartDrawer').click(function () {
                    couponInputLengthInterval = setInterval(function () {
                      jquery__WEBPACK_IMPORTED_MODULE_2___default()("input[name=coupon]").removeAttr("checked");
                      if (jquery__WEBPACK_IMPORTED_MODULE_2___default()('.ReactModalPortal [data-test=redeemable-collapsable]').length > 0) {
                        clearInterval(couponInputLengthInterval);
                        var groupID = jquery__WEBPACK_IMPORTED_MODULE_2___default()('#customer-group-id').text();
                        if (groupID.length === 0) {
                          groupID = 0;
                        }
                        var selectorDiv = jquery__WEBPACK_IMPORTED_MODULE_2___default()('.ReactModalPortal [data-test=redeemable-collapsable]');
                        _this.getCoupons(groupID, selectorDiv);
                        jquery__WEBPACK_IMPORTED_MODULE_2___default()('.ReactModalPortal [data-test=redeemable-collapsable] .redeemable-entry .optimizedCheckout-form-input').attr('id', 'mobileLayoutInput');
                        jquery__WEBPACK_IMPORTED_MODULE_2___default()(document).on("click", ".ReactModalPortal [data-test=redeemable-collapsable] input[name=coupon]", function (e) {
                          if (jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).hasClass("checked")) {
                            jquery__WEBPACK_IMPORTED_MODULE_2___default()(".optimizedCheckout-form-input").val('');
                            jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).removeClass("checked");
                            jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).removeAttr("checked");
                          } else {
                            jquery__WEBPACK_IMPORTED_MODULE_2___default()("input:radio[name=coupon]").removeAttr("checked");
                            jquery__WEBPACK_IMPORTED_MODULE_2___default()("input:radio[name=coupon]").removeClass("checked");
                            setTimeout(function () {
                              jquery__WEBPACK_IMPORTED_MODULE_2___default()(".ReactModalPortal .modalOverlay").find("input[name=coupon]:checked").addClass("checked");
                              jquery__WEBPACK_IMPORTED_MODULE_2___default()(".ReactModalPortal .modalOverlay").find("input[name=coupon]:checked").attr("checked", true);
                            }, 50);
                            var code = jquery__WEBPACK_IMPORTED_MODULE_2___default()(".ReactModalPortal .modalOverlay").find("input[name=coupon]:checked").val();
                            var couponInput = document.getElementById('mobileLayoutInput');
                            _this.setNativeValue(couponInput, code);
                            couponInput.dispatchEvent(new Event('input', {
                              bubbles: true
                            }));
                          }
                        });
                      }
                    }, 500);
                  });
                }, 1000);
              });
              jquery__WEBPACK_IMPORTED_MODULE_2___default()(document).on("keyup", "#postCodeInput", function () {
                var numberReg = /^[0-9]+$/;
                var code = jquery__WEBPACK_IMPORTED_MODULE_2___default()("#postCodeInput").val();
                var html = '';
                if (code.length != 6 && code.length != 0) {
                  event.preventDefault();
                  html += '<ul class="form-field-errors" data-test="shipping-address-postal-code-field-error-message">';
                  html += '<li class="form-field-error">';
                  html += '<label class="form-inlineMessage" for="shippingAddress.postalCode" style="color:#d14343">Postal Code is not valid</label></li></ul>';
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()("#postCodeInput").parent().find("ul.form-field-errors").remove();
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()("#postCodeInput").parent().find(".form-label").css("color", "#d14343");
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()("#postCodeInput").css("border-color", "#d14343");
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()(html).insertAfter("#postCodeInput");
                } else if (!numberReg.test(code) && code.length != 0) {
                  event.preventDefault();
                  html += '<ul class="form-field-errors" data-test="shipping-address-postal-code-field-error-message">';
                  html += '<li class="form-field-error">';
                  html += '<label class="form-inlineMessage" for="shippingAddress.postalCode" style="color:#d14343">Postal Code is not valid</label></li></ul>';
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()("#postCodeInput").parent().find("ul.form-field-errors").remove();
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()("#postCodeInput").parent().find(".form-label").css("color", "#d14343");
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()("#postCodeInput").css("border-color", "#d14343");
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()(html).insertAfter("#postCodeInput");
                } else if (numberReg.test(code) && code.length == 6) {
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()("#postCodeInput").parent().find(".form-label").css("color", "");
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()("#postCodeInput").css("border-color", "#78bf95");
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()("#postCodeInput").parent().find("ul.form-field-errors").remove();
                }
              });
              jquery__WEBPACK_IMPORTED_MODULE_2___default()(document).on("keyup", "#phoneInput", function () {
                var numberReg = /^[0-9]+$/;
                var number = jquery__WEBPACK_IMPORTED_MODULE_2___default()("#phoneInput").val();
                var mobilehtml = '';
                if (number.length != 10 && number.length != 0) {
                  event.preventDefault();
                  mobilehtml += '<ul class="form-field-errors" data-test="shipping-address-mobile-number-field-error-message">';
                  mobilehtml += '<li class="form-field-error">';
                  mobilehtml += '<label class="form-inlineMessage" for="shippingAddress.postalCode" style="color:#d14343">mobile number is not valid</label></li></ul>';
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()("#phoneInput").parent().find("ul.form-field-errors").remove();
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()("#phoneInput").parent().find(".form-label").css("color", "#d14343");
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()("#phoneInput").css("border-color", "#d14343");
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()(mobilehtml).insertAfter("#phoneInput");
                } else if (!numberReg.test(number) && number.length != 0) {
                  event.preventDefault();
                  mobilehtml += '<ul class="form-field-errors" data-test="shipping-address-postal-code-field-error-message">';
                  mobilehtml += '<li class="form-field-error">';
                  mobilehtml += '<label class="form-inlineMessage" for="shippingAddress.postalCode" style="color:#d14343">mobile number is not valid</label></li></ul>';
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()("#phoneInput").parent().find("ul.form-field-errors").remove();
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()("#phoneInput").parent().find(".form-label").css("color", "#d14343");
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()("#phoneInput").css("border-color", "#d14343");
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()(mobilehtml).insertAfter("#phoneInput");
                } else if (numberReg.test(number) && number.length == 10) {
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()("#phoneInput").parent().find(".form-label").css("color", "");
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()("#phoneInput").css("border-color", "#78bf95");
                  jquery__WEBPACK_IMPORTED_MODULE_2___default()("#phoneInput").parent().find("ul.form-field-errors").remove();
                }
              });
              jquery__WEBPACK_IMPORTED_MODULE_2___default()(document).on("keyup", "#paymentStepInput", function (e) {
                jquery__WEBPACK_IMPORTED_MODULE_2___default()(".checkout-form .form-body [data-test=redeemable-collapsable] input[name=coupon]").each(function () {
                  var input = jquery__WEBPACK_IMPORTED_MODULE_2___default()('#paymentStepInput').val();
                  if (jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).val() != input) {
                    jquery__WEBPACK_IMPORTED_MODULE_2___default()("input[name=coupon]").removeAttr("checked");
                    jquery__WEBPACK_IMPORTED_MODULE_2___default()("input[name=coupon]").removeClass("checked");
                  } else {
                    if (input == jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).val()) {
                      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).addClass("checked");
                      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).attr("checked", true);
                      return false;
                    }
                  }
                });
              });
              jquery__WEBPACK_IMPORTED_MODULE_2___default()(document).on("keyup", "#cartLayoutInput", function (e) {
                jquery__WEBPACK_IMPORTED_MODULE_2___default()(".layout-cart [data-test=redeemable-collapsable] input[name=coupon]").each(function () {
                  var input = jquery__WEBPACK_IMPORTED_MODULE_2___default()('#cartLayoutInput').val();
                  if (jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).val() != input) {
                    jquery__WEBPACK_IMPORTED_MODULE_2___default()("input[name=coupon]").removeAttr("checked");
                    jquery__WEBPACK_IMPORTED_MODULE_2___default()("input[name=coupon]").removeClass("checked");
                  } else {
                    if (input == jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).val()) {
                      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).addClass("checked");
                      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).attr("checked", true);
                      return false;
                    }
                  }
                });
              });
              jquery__WEBPACK_IMPORTED_MODULE_2___default()(document).on("keyup", "#mobileLayoutInput", function (e) {
                jquery__WEBPACK_IMPORTED_MODULE_2___default()(".ReactModalPortal [data-test=redeemable-collapsable] input[name=coupon]").each(function () {
                  var input = jquery__WEBPACK_IMPORTED_MODULE_2___default()('#mobileLayoutInput').val();
                  if (jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).val() != input) {
                    jquery__WEBPACK_IMPORTED_MODULE_2___default()("input[name=coupon]").removeAttr("checked");
                    jquery__WEBPACK_IMPORTED_MODULE_2___default()("input[name=coupon]").removeClass("checked");
                  } else {
                    if (input == jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).val()) {
                      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).addClass("checked");
                      jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).attr("checked", true);
                      return false;
                    }
                  }
                });
              });
            case 12:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, this);
    }));
    function onReady() {
      return _onReady.apply(this, arguments);
    }
    return onReady;
  }();
  _proto.ready = function ready(selector, fn) {
    // Store the selector and callback to be monitored
    listeners.push({
      selector: selector,
      fn: fn
    });
    if (!observer) {
      // Watch for changes in the document
      observer = new MutationObserver(this.check);
      observer.observe(doc.documentElement, {
        childList: true,
        subtree: true
      });
    }
    // Check if the element is currently in the DOM
    this.check();
  };
  _proto.check = function check() {
    // Check the DOM for elements matching a stored selector
    for (var i = 0, len = listeners.length, listener, elements; i < len; i++) {
      listener = listeners[i];
      // Query for elements matching the specified selector
      elements = doc.querySelectorAll(listener.selector);
      for (var j = 0, jLen = elements.length, element; j < jLen; j++) {
        element = elements[j];
        // Make sure the callback isn't invoked with the 
        // same element more than once
        if (!element.ready) {
          element.ready = true;
          // Invoke the callback with the element
          listener.fn.call(element, element);
        }
      }
    }
  };
  _proto.setNativeValue = function setNativeValue(element, value) {
    var valueSetter = Object.getOwnPropertyDescriptor(element, 'value').set;
    var prototype = Object.getPrototypeOf(element);
    var prototypeValueSetter = Object.getOwnPropertyDescriptor(prototype, 'value').set;
    if (valueSetter && valueSetter !== prototypeValueSetter) {
      prototypeValueSetter.call(element, value);
    } else {
      valueSetter.call(element, value);
    }
  };
  _proto.getCoupons = function getCoupons(groupID, selectorDiv) {
    jquery__WEBPACK_IMPORTED_MODULE_2___default.a.ajax({
      type: "POST",
      url: "https://bg-sync-api-dev.kapiva.in/api/coupon.php",
      async: false,
      headers: {
        'gid': groupID
      },
      success: function success(data) {
        var data = JSON.parse(data);
        var currentDate = new Date();
        var couponBlock = '<div class="coupon-list">';
        if (data['status'] != 'fail') {
          for (var i = 0; i < data['data'].length; i++) {
            var coupons = data['data'][i];
            var value = moment(coupons['expires']).format('MM/DD/YYYY h:mm a');
            var dt = new Date(value);
            if (currentDate < dt) {
              couponBlock += '<li><label class="code_input"><strong>' + coupons['code'] + '</strong><br>Save ' + coupons['amount'] + ' <br>Expires on : ' + value + '  <input type="radio" value="' + coupons['code'] + '" name="coupon"> <span class="checkmark"></span></label></li>';
            }
          }
        }
        couponBlock += "</div>";
        // var selectorDiv=$('[data-test=redeemable-collapsable]');
        selectorDiv.find(".coupon-list").remove();
        selectorDiv.append(couponBlock);
      }
    });
  };
  return Checkout;
}(_page_manager__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvdGhlbWUvY2hlY2tvdXQuanMiXSwibmFtZXMiOlsid2luIiwid2luZG93IiwibGlzdGVuZXJzIiwiZG9jIiwiZG9jdW1lbnQiLCJNdXRhdGlvbk9ic2VydmVyIiwiV2ViS2l0TXV0YXRpb25PYnNlcnZlciIsIm9ic2VydmVyIiwiX3RoaXMiLCJzZXJ2aWNlIiwiY3JlYXRlQ2hlY2tvdXRTZXJ2aWNlIiwiQ2hlY2tvdXQiLCJvblJlYWR5Iiwic2NyaXB0IiwiY3JlYXRlRWxlbWVudCIsInNyYyIsImhlYWQiLCJhcHBlbmRDaGlsZCIsInJlYWR5IiwiZWxlbWVudCIsImdyb3VwSUQiLCIkIiwidGV4dCIsImxlbmd0aCIsInNlbGVjdG9yRGl2IiwiZ2V0Q291cG9ucyIsImF0dHIiLCJvbiIsImUiLCJyZW1vdmVBdHRyIiwiaGFzQ2xhc3MiLCJwcmV2ZW50RGVmYXVsdCIsInZhbCIsInJlbW92ZUNsYXNzIiwiY29kZSIsImNvdXBvbklucHV0IiwiZ2V0RWxlbWVudEJ5SWQiLCJzZXROYXRpdmVWYWx1ZSIsImRpc3BhdGNoRXZlbnQiLCJFdmVudCIsImJ1YmJsZXMiLCJhZGRDbGFzcyIsImZpbmQiLCJjb3Vwb25JbnB1dExlbmd0aEludGVydmFsIiwic2V0VGltZW91dCIsImNsaWNrIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwibnVtYmVyUmVnIiwiaHRtbCIsImV2ZW50IiwicGFyZW50IiwicmVtb3ZlIiwiY3NzIiwiaW5zZXJ0QWZ0ZXIiLCJ0ZXN0IiwibnVtYmVyIiwibW9iaWxlaHRtbCIsImVhY2giLCJpbnB1dCIsInNlbGVjdG9yIiwiZm4iLCJwdXNoIiwiY2hlY2siLCJvYnNlcnZlIiwiZG9jdW1lbnRFbGVtZW50IiwiY2hpbGRMaXN0Iiwic3VidHJlZSIsImkiLCJsZW4iLCJsaXN0ZW5lciIsImVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsImoiLCJqTGVuIiwiY2FsbCIsInZhbHVlIiwidmFsdWVTZXR0ZXIiLCJPYmplY3QiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJzZXQiLCJwcm90b3R5cGUiLCJnZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZVZhbHVlU2V0dGVyIiwiYWpheCIsInR5cGUiLCJ1cmwiLCJhc3luYyIsImhlYWRlcnMiLCJzdWNjZXNzIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsImN1cnJlbnREYXRlIiwiRGF0ZSIsImNvdXBvbkJsb2NrIiwiY291cG9ucyIsIm1vbWVudCIsImZvcm1hdCIsImR0IiwiYXBwZW5kIiwiUGFnZU1hbmFnZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7K0NBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUR5QztBQUN5QjtBQUMzQztBQUNtQjtBQUNYO0FBRS9CLElBQUlBLEdBQUcsR0FBQ0MsTUFBTTtFQUNWQyxTQUFTLEdBQUcsRUFBRTtFQUNkQyxHQUFHLEdBQUdILEdBQUcsQ0FBQ0ksUUFBUTtFQUNsQkMsZ0JBQWdCLEdBQUdMLEdBQUcsQ0FBQ0ssZ0JBQWdCLElBQUlMLEdBQUcsQ0FBQ00sc0JBQXNCO0VBQ3JFQyxRQUFRO0VBQ1JDLEtBQUs7QUFDVCxJQUFNQyxPQUFPLEdBQUdDLHVGQUFxQixFQUFFO0FBQUMsSUFDbkJDLFFBQVE7RUFBQTtFQUFBO0lBQUE7RUFBQTtFQUFBO0VBQUEsT0FDbkJDLE9BQU87SUFBQSwwRUFBYjtNQUFBO01BQUE7UUFBQTtVQUFBO1lBQUE7Y0FDSUosS0FBSyxHQUFHLElBQUk7Y0FDWjtjQUNBO2NBQ0E7Y0FDQTtjQUVJSyxNQUFNLEdBQUdULFFBQVEsQ0FBQ1UsYUFBYSxDQUFDLFFBQVEsQ0FBQztjQUM3Q0QsTUFBTSxDQUFDRSxHQUFHLEdBQUcsdUVBQXVFO2NBQ3BGWCxRQUFRLENBQUNZLElBQUksQ0FBQ0MsV0FBVyxDQUFDSixNQUFNLENBQUM7Y0FFakMsSUFBSSxDQUFDSyxLQUFLLENBQUMsbURBQW1ELEVBQUUsVUFBVUMsT0FBTyxFQUFFO2dCQUMvRSxJQUFJQyxPQUFPLEdBQUND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QUNNLEVBQUUsRUFDZjtjQUVFSixXQUFXLElBQUUsd0NBQXdDLEdBQUNDLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBQyxvQkFBb0IsR0FBQ0EsT0FBTyxDQUFDLFFBQVEsQ0FBQyxHQUFDLG9CQUFvQixHQUFDcEIsS0FBSyxHQUFDLCtCQUErQixHQUFDb0IsT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFDLCtEQUErRDtZQUV6UDtVQUVQO1FBQ0Q7UUFDRkQsV0FBVyxJQUFFLFFBQVE7UUFDckI7UUFDQXZFLFdBQVcsQ0FBQ2tCLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQ1UsTUFBTSxFQUFFO1FBQzFDNUIsV0FBVyxDQUFDNEUsTUFBTSxDQUFDTCxXQUFXLENBQUM7TUFFbEM7SUFDSixDQUFDLENBQUM7RUFDTixDQUFDO0VBQUE7QUFBQSxFQXBUaUNNLHFEQUFXIiwiZmlsZSI6InRoZW1lLWJ1bmRsZS5jaHVuay4xNC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQYWdlTWFuYWdlciBmcm9tICcuL3BhZ2UtbWFuYWdlcic7XHJcbmltcG9ydCB7IGNyZWF0ZUNoZWNrb3V0U2VydmljZSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsnO1xyXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xyXG5pbXBvcnQgZm9ybXMgZnJvbSAnLi9jb21tb24vbW9kZWxzL2Zvcm1zJztcclxuaW1wb3J0IG5vZCBmcm9tICcuL2NvbW1vbi9ub2QnO1xyXG5cclxudmFyIHdpbj13aW5kb3csXHJcbiAgICBsaXN0ZW5lcnMgPSBbXSxcclxuICAgIGRvYyA9IHdpbi5kb2N1bWVudCxcclxuICAgIE11dGF0aW9uT2JzZXJ2ZXIgPSB3aW4uTXV0YXRpb25PYnNlcnZlciB8fCB3aW4uV2ViS2l0TXV0YXRpb25PYnNlcnZlcixcclxuICAgIG9ic2VydmVyLFxyXG4gICAgX3RoaXM7XHJcbmNvbnN0IHNlcnZpY2UgPSBjcmVhdGVDaGVja291dFNlcnZpY2UoKTtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hlY2tvdXQgZXh0ZW5kcyBQYWdlTWFuYWdlciB7XHJcbiAgICBhc3luYyBvblJlYWR5KCkge1xyXG4gICAgICAgIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBjb25zdCBzdGF0ZSA9IGF3YWl0IHNlcnZpY2UubG9hZENoZWNrb3V0KCk7XHJcbiAgICAgICAgLy8gdmFyIGdldF9jaGVja291dCA9IHN0YXRlLmRhdGEuZ2V0Q2hlY2tvdXQoKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnZ2V0X2NoZWNrb3V0JywgZ2V0X2NoZWNrb3V0KTtcclxuICAgICAgICAvLyB2YXIgZ3JhbmRUb3RhbCA9IGdldF9jaGVja291dC5ncmFuZFRvdGFsO1xyXG5cclxuICAgICAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgICAgc2NyaXB0LnNyYyA9IFwiaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbW9tZW50LmpzLzIuMjkuMS9tb21lbnQubWluLmpzXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG5cclxuICAgICAgICB0aGlzLnJlYWR5KCcubGF5b3V0LWNhcnQgLmNhcnQub3B0aW1pemVkQ2hlY2tvdXQtb3JkZXJTdW1tYXJ5JywgZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdmFyIGdyb3VwSUQ9JCgnI2N1c3RvbWVyLWdyb3VwLWlkJykudGV4dCgpO1xyXG4gICAgICAgICAgICBpZihncm91cElELmxlbmd0aCA9PT0gMCl7XHJcbiAgICAgICAgICAgICAgICBncm91cElEPTA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHNlbGVjdG9yRGl2PSQoJy5sYXlvdXQtY2FydCBbZGF0YS10ZXN0PXJlZGVlbWFibGUtY29sbGFwc2FibGVdJyk7XHJcbiAgICAgICAgICAgIF90aGlzLmdldENvdXBvbnMoZ3JvdXBJRCwgc2VsZWN0b3JEaXYpO1xyXG5cclxuICAgICAgICAgICAgJCgnLmxheW91dC1jYXJ0IFtkYXRhLXRlc3Q9cmVkZWVtYWJsZS1jb2xsYXBzYWJsZV0gLnJlZGVlbWFibGUtZW50cnkgLm9wdGltaXplZENoZWNrb3V0LWZvcm0taW5wdXQnKS5hdHRyKCdpZCcsJ2NhcnRMYXlvdXRJbnB1dCcpO1xyXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbihcImNsaWNrXCIsXCIubGF5b3V0LWNhcnQgW2RhdGEtdGVzdD1yZWRlZW1hYmxlLWNvbGxhcHNhYmxlXSBpbnB1dFtuYW1lPWNvdXBvbl1cIixmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICQoXCJpbnB1dFtuYW1lPWNvdXBvbl1cIikucmVtb3ZlQXR0cihcImNoZWNrZWRcIik7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoJCh0aGlzKS5oYXNDbGFzcyhcImNoZWNrZWRcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IFxyXG4gICAgICAgICAgICAgICAgICAkKFwiLm9wdGltaXplZENoZWNrb3V0LWZvcm0taW5wdXRcIikudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVBdHRyKFwiY2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImNoZWNrZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICB2YXIgY29kZT0kKCdpbnB1dFtuYW1lPWNvdXBvbl06Y2hlY2tlZCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvdXBvbklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhcnRMYXlvdXRJbnB1dCcpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0TmF0aXZlVmFsdWUoY291cG9uSW5wdXQgLCBjb2RlKTtcclxuICAgICAgICAgICAgICAgIGNvdXBvbklucHV0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdpbnB1dCcsIHsgYnViYmxlczogdHJ1ZSB9KSk7XHJcbiAgICAgICAgICAgICAgICAgJChcImlucHV0OnJhZGlvW25hbWU9Y291cG9uXVwiKS5yZW1vdmVDbGFzcyhcImNoZWNrZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcImNoZWNrZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKFwiY2hlY2tlZFwiLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWFkeSgnLmNoZWNrb3V0LWZvcm0gLmZvcm0tZmllbGRzZXQgdWwuZm9ybS1jaGVja2xpc3QnLCBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXBJRD0kKCcjY3VzdG9tZXItZ3JvdXAtaWQnKS50ZXh0KCk7XHJcbiAgICAgICAgICAgIGlmKGdyb3VwSUQubGVuZ3RoID09PSAwKXtcclxuICAgICAgICAgICAgICAgIGdyb3VwSUQ9MDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgc2VsZWN0b3JEaXY9JCgnLmNoZWNrb3V0LWZvcm0gLmZvcm0tZmllbGRzZXQucmVkZWVtYWJsZS1wYXltZW50cyBbZGF0YS10ZXN0PXJlZGVlbWFibGUtY29sbGFwc2FibGVdJyk7XHJcbiAgICAgICAgICAgIF90aGlzLmdldENvdXBvbnMoZ3JvdXBJRCwgc2VsZWN0b3JEaXYpO1xyXG5cclxuICAgICAgICAgICAgJCgnLmNoZWNrb3V0LWZvcm0gW2RhdGEtdGVzdD1yZWRlZW1hYmxlLWNvbGxhcHNhYmxlXSAucmVkZWVtYWJsZS1lbnRyeSAub3B0aW1pemVkQ2hlY2tvdXQtZm9ybS1pbnB1dCcpLmF0dHIoJ2lkJywncGF5bWVudFN0ZXBJbnB1dCcpO1xyXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbihcImNsaWNrXCIsXCIuY2hlY2tvdXQtZm9ybSAuZm9ybS1ib2R5IFtkYXRhLXRlc3Q9cmVkZWVtYWJsZS1jb2xsYXBzYWJsZV0gaW5wdXRbbmFtZT1jb3Vwb25dXCIsZnVuY3Rpb24oZSl7IFxyXG4gICAgICAgICAgICAgICQoXCJpbnB1dFtuYW1lPWNvdXBvbl1cIikucmVtb3ZlQXR0cihcImNoZWNrZWRcIik7ICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZigkKHRoaXMpLmhhc0NsYXNzKFwiY2hlY2tlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgXHJcbiAgICAgICAgICAgICAgICAgICQoXCIub3B0aW1pemVkQ2hlY2tvdXQtZm9ybS1pbnB1dFwiKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUF0dHIoXCJjaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKFwiY2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICQoXCJpbnB1dDpyYWRpb1tuYW1lPWNvdXBvbl1cIikucmVtb3ZlQ2xhc3MoXCJjaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJCgnLmZvcm0tYm9keScpLmZpbmQoJ2lucHV0W25hbWU9Y291cG9uXTpjaGVja2VkJykuYWRkQ2xhc3MoXCJjaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJCgnLmZvcm0tYm9keScpLmZpbmQoJ2lucHV0W25hbWU9Y291cG9uXTpjaGVja2VkJykuYXR0cihcImNoZWNrZWRcIix0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgIHZhciBjb2RlPSQoJy5mb3JtLWJvZHknKS5maW5kKCdpbnB1dFtuYW1lPWNvdXBvbl06Y2hlY2tlZCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvdXBvbklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BheW1lbnRTdGVwSW5wdXQnKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldE5hdGl2ZVZhbHVlKGNvdXBvbklucHV0ICwgY29kZSk7XHJcbiAgICAgICAgICAgICAgICBjb3Vwb25JbnB1dC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnJlYWR5KCcuY2FydERyYXdlcicsIGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBjb3Vwb25JbnB1dExlbmd0aEludGVydmFsID0gJyc7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICQoJy5jYXJ0RHJhd2VyJykuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBjb3Vwb25JbnB1dExlbmd0aEludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcImlucHV0W25hbWU9Y291cG9uXVwiKS5yZW1vdmVBdHRyKFwiY2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoJCgnLlJlYWN0TW9kYWxQb3J0YWwgW2RhdGEtdGVzdD1yZWRlZW1hYmxlLWNvbGxhcHNhYmxlXScpLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChjb3Vwb25JbnB1dExlbmd0aEludGVydmFsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncm91cElEPSQoJyNjdXN0b21lci1ncm91cC1pZCcpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGdyb3VwSUQubGVuZ3RoID09PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElEPTA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3JEaXY9JCgnLlJlYWN0TW9kYWxQb3J0YWwgW2RhdGEtdGVzdD1yZWRlZW1hYmxlLWNvbGxhcHNhYmxlXScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZ2V0Q291cG9ucyhncm91cElELCBzZWxlY3RvckRpdik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLlJlYWN0TW9kYWxQb3J0YWwgW2RhdGEtdGVzdD1yZWRlZW1hYmxlLWNvbGxhcHNhYmxlXSAucmVkZWVtYWJsZS1lbnRyeSAub3B0aW1pemVkQ2hlY2tvdXQtZm9ybS1pbnB1dCcpLmF0dHIoJ2lkJywnbW9iaWxlTGF5b3V0SW5wdXQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIixcIi5SZWFjdE1vZGFsUG9ydGFsIFtkYXRhLXRlc3Q9cmVkZWVtYWJsZS1jb2xsYXBzYWJsZV0gaW5wdXRbbmFtZT1jb3Vwb25dXCIsZnVuY3Rpb24oZSl7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkKHRoaXMpLmhhc0NsYXNzKFwiY2hlY2tlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIub3B0aW1pemVkQ2hlY2tvdXQtZm9ybS1pbnB1dFwiKS52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImNoZWNrZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUF0dHIoXCJjaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiaW5wdXQ6cmFkaW9bbmFtZT1jb3Vwb25dXCIpLnJlbW92ZUF0dHIoXCJjaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCJpbnB1dDpyYWRpb1tuYW1lPWNvdXBvbl1cIikucmVtb3ZlQ2xhc3MoXCJjaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiLlJlYWN0TW9kYWxQb3J0YWwgLm1vZGFsT3ZlcmxheVwiKS5maW5kKFwiaW5wdXRbbmFtZT1jb3Vwb25dOmNoZWNrZWRcIikuYWRkQ2xhc3MoXCJjaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuUmVhY3RNb2RhbFBvcnRhbCAubW9kYWxPdmVybGF5XCIpLmZpbmQoXCJpbnB1dFtuYW1lPWNvdXBvbl06Y2hlY2tlZFwiKS5hdHRyKFwiY2hlY2tlZFwiLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sNTApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2RlID0gJChcIi5SZWFjdE1vZGFsUG9ydGFsIC5tb2RhbE92ZXJsYXlcIikuZmluZChcImlucHV0W25hbWU9Y291cG9uXTpjaGVja2VkXCIpLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb3Vwb25JbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2JpbGVMYXlvdXRJbnB1dCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0TmF0aXZlVmFsdWUoY291cG9uSW5wdXQgLCBjb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdXBvbklucHV0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdpbnB1dCcsIHsgYnViYmxlczogdHJ1ZSB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LDUwMCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSwxMDAwKTtcclxuICAgICAgICB9KTtcclxuICAgICAgIFxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKFwia2V5dXBcIixcIiNwb3N0Q29kZUlucHV0XCIsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIG51bWJlclJlZyA9ICAvXlswLTldKyQvO1xyXG4gICAgICAgICAgICAgICAgICAgdmFyIGNvZGUgPSAkKFwiI3Bvc3RDb2RlSW5wdXRcIikudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICB2YXIgaHRtbCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgaWYgKGNvZGUubGVuZ3RoICE9IDYgJiYgY29kZS5sZW5ndGggIT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGh0bWwrPSc8dWwgY2xhc3M9XCJmb3JtLWZpZWxkLWVycm9yc1wiIGRhdGEtdGVzdD1cInNoaXBwaW5nLWFkZHJlc3MtcG9zdGFsLWNvZGUtZmllbGQtZXJyb3ItbWVzc2FnZVwiPidcclxuICAgICAgICAgICAgICAgICAgICAgIGh0bWwrPSc8bGkgY2xhc3M9XCJmb3JtLWZpZWxkLWVycm9yXCI+J1xyXG4gICAgICAgICAgICAgICAgICAgICAgaHRtbCs9JzxsYWJlbCBjbGFzcz1cImZvcm0taW5saW5lTWVzc2FnZVwiIGZvcj1cInNoaXBwaW5nQWRkcmVzcy5wb3N0YWxDb2RlXCIgc3R5bGU9XCJjb2xvcjojZDE0MzQzXCI+UG9zdGFsIENvZGUgaXMgbm90IHZhbGlkPC9sYWJlbD48L2xpPjwvdWw+JyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgJChcIiNwb3N0Q29kZUlucHV0XCIpLnBhcmVudCgpLmZpbmQoXCJ1bC5mb3JtLWZpZWxkLWVycm9yc1wiKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgJChcIiNwb3N0Q29kZUlucHV0XCIpLnBhcmVudCgpLmZpbmQoXCIuZm9ybS1sYWJlbFwiKS5jc3MoXCJjb2xvclwiLFwiI2QxNDM0M1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICQoXCIjcG9zdENvZGVJbnB1dFwiKS5jc3MoXCJib3JkZXItY29sb3JcIixcIiNkMTQzNDNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkKCBodG1sICkuaW5zZXJ0QWZ0ZXIoIFwiI3Bvc3RDb2RlSW5wdXRcIiApO1xyXG4gICAgICAgICAgICAgICAgICB9ZWxzZSBpZighbnVtYmVyUmVnLnRlc3QoY29kZSkgJiYgY29kZS5sZW5ndGggIT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaHRtbCs9Jzx1bCBjbGFzcz1cImZvcm0tZmllbGQtZXJyb3JzXCIgZGF0YS10ZXN0PVwic2hpcHBpbmctYWRkcmVzcy1wb3N0YWwtY29kZS1maWVsZC1lcnJvci1tZXNzYWdlXCI+J1xyXG4gICAgICAgICAgICAgICAgICAgICAgaHRtbCs9JzxsaSBjbGFzcz1cImZvcm0tZmllbGQtZXJyb3JcIj4nXHJcbiAgICAgICAgICAgICAgICAgICAgICBodG1sKz0nPGxhYmVsIGNsYXNzPVwiZm9ybS1pbmxpbmVNZXNzYWdlXCIgZm9yPVwic2hpcHBpbmdBZGRyZXNzLnBvc3RhbENvZGVcIiBzdHlsZT1cImNvbG9yOiNkMTQzNDNcIj5Qb3N0YWwgQ29kZSBpcyBub3QgdmFsaWQ8L2xhYmVsPjwvbGk+PC91bD4nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAkKFwiI3Bvc3RDb2RlSW5wdXRcIikucGFyZW50KCkuZmluZChcInVsLmZvcm0tZmllbGQtZXJyb3JzXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAkKFwiI3Bvc3RDb2RlSW5wdXRcIikucGFyZW50KCkuZmluZChcIi5mb3JtLWxhYmVsXCIpLmNzcyhcImNvbG9yXCIsXCIjZDE0MzQzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgJChcIiNwb3N0Q29kZUlucHV0XCIpLmNzcyhcImJvcmRlci1jb2xvclwiLFwiI2QxNDM0M1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICQoIGh0bWwgKS5pbnNlcnRBZnRlciggXCIjcG9zdENvZGVJbnB1dFwiICk7IFxyXG4gICAgICAgICAgICAgICAgICB9ZWxzZSBpZihudW1iZXJSZWcudGVzdChjb2RlKSAmJiBjb2RlLmxlbmd0aCA9PSA2ICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgJChcIiNwb3N0Q29kZUlucHV0XCIpLnBhcmVudCgpLmZpbmQoXCIuZm9ybS1sYWJlbFwiKS5jc3MoXCJjb2xvclwiLFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICQoXCIjcG9zdENvZGVJbnB1dFwiKS5jc3MoXCJib3JkZXItY29sb3JcIixcIiM3OGJmOTVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkKFwiI3Bvc3RDb2RlSW5wdXRcIikucGFyZW50KCkuZmluZChcInVsLmZvcm0tZmllbGQtZXJyb3JzXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgICQoZG9jdW1lbnQpLm9uKFwia2V5dXBcIixcIiNwaG9uZUlucHV0XCIsZnVuY3Rpb24oKXtcclxuICAgICAgICBcclxuICAgICAgICAgICAgdmFyIG51bWJlclJlZyA9ICAvXlswLTldKyQvO1xyXG4gICAgICAgICAgICAgdmFyIG51bWJlciA9ICQoXCIjcGhvbmVJbnB1dFwiKS52YWwoKTtcclxuICAgIFxyXG4gICAgICAgICAgICB2YXIgbW9iaWxlaHRtbCA9ICcnO1xyXG4gICAgICAgICAgICBpZiAobnVtYmVyLmxlbmd0aCAhPSAxMCAmJiBudW1iZXIubGVuZ3RoICE9IDApe1xyXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgbW9iaWxlaHRtbCs9Jzx1bCBjbGFzcz1cImZvcm0tZmllbGQtZXJyb3JzXCIgZGF0YS10ZXN0PVwic2hpcHBpbmctYWRkcmVzcy1tb2JpbGUtbnVtYmVyLWZpZWxkLWVycm9yLW1lc3NhZ2VcIj4nXHJcbiAgICAgICAgICAgICAgIG1vYmlsZWh0bWwrPSc8bGkgY2xhc3M9XCJmb3JtLWZpZWxkLWVycm9yXCI+J1xyXG4gICAgICAgICAgICAgICBtb2JpbGVodG1sKz0nPGxhYmVsIGNsYXNzPVwiZm9ybS1pbmxpbmVNZXNzYWdlXCIgZm9yPVwic2hpcHBpbmdBZGRyZXNzLnBvc3RhbENvZGVcIiBzdHlsZT1cImNvbG9yOiNkMTQzNDNcIj5tb2JpbGUgbnVtYmVyIGlzIG5vdCB2YWxpZDwvbGFiZWw+PC9saT48L3VsPicgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgJChcIiNwaG9uZUlucHV0XCIpLnBhcmVudCgpLmZpbmQoXCJ1bC5mb3JtLWZpZWxkLWVycm9yc1wiKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICQoXCIjcGhvbmVJbnB1dFwiKS5wYXJlbnQoKS5maW5kKFwiLmZvcm0tbGFiZWxcIikuY3NzKFwiY29sb3JcIixcIiNkMTQzNDNcIik7XHJcbiAgICAgICAgICAgICAgICQoXCIjcGhvbmVJbnB1dFwiKS5jc3MoXCJib3JkZXItY29sb3JcIixcIiNkMTQzNDNcIik7XHJcbiAgICAgICAgICAgICAgICQoIG1vYmlsZWh0bWwgKS5pbnNlcnRBZnRlciggXCIjcGhvbmVJbnB1dFwiICk7XHJcbiAgICAgICAgICAgfWVsc2UgaWYoIW51bWJlclJlZy50ZXN0KG51bWJlcikgJiYgbnVtYmVyLmxlbmd0aCAhPSAwKXtcclxuICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgbW9iaWxlaHRtbCs9Jzx1bCBjbGFzcz1cImZvcm0tZmllbGQtZXJyb3JzXCIgZGF0YS10ZXN0PVwic2hpcHBpbmctYWRkcmVzcy1wb3N0YWwtY29kZS1maWVsZC1lcnJvci1tZXNzYWdlXCI+J1xyXG4gICAgICAgICAgICAgICBtb2JpbGVodG1sKz0nPGxpIGNsYXNzPVwiZm9ybS1maWVsZC1lcnJvclwiPidcclxuICAgICAgICAgICAgICAgbW9iaWxlaHRtbCs9JzxsYWJlbCBjbGFzcz1cImZvcm0taW5saW5lTWVzc2FnZVwiIGZvcj1cInNoaXBwaW5nQWRkcmVzcy5wb3N0YWxDb2RlXCIgc3R5bGU9XCJjb2xvcjojZDE0MzQzXCI+bW9iaWxlIG51bWJlciBpcyBub3QgdmFsaWQ8L2xhYmVsPjwvbGk+PC91bD4nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICQoXCIjcGhvbmVJbnB1dFwiKS5wYXJlbnQoKS5maW5kKFwidWwuZm9ybS1maWVsZC1lcnJvcnNcIikucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAkKFwiI3Bob25lSW5wdXRcIikucGFyZW50KCkuZmluZChcIi5mb3JtLWxhYmVsXCIpLmNzcyhcImNvbG9yXCIsXCIjZDE0MzQzXCIpO1xyXG4gICAgICAgICAgICAgICAkKFwiI3Bob25lSW5wdXRcIikuY3NzKFwiYm9yZGVyLWNvbG9yXCIsXCIjZDE0MzQzXCIpO1xyXG4gICAgICAgICAgICAgICAkKCBtb2JpbGVodG1sICkuaW5zZXJ0QWZ0ZXIoIFwiI3Bob25lSW5wdXRcIiApOyBcclxuICAgICAgICAgICB9ZWxzZSBpZihudW1iZXJSZWcudGVzdChudW1iZXIpICYmIG51bWJlci5sZW5ndGggPT0gMTAgKXtcclxuICAgICAgICAgICAgICAgICQoXCIjcGhvbmVJbnB1dFwiKS5wYXJlbnQoKS5maW5kKFwiLmZvcm0tbGFiZWxcIikuY3NzKFwiY29sb3JcIixcIlwiKTtcclxuICAgICAgICAgICAgICAgICQoXCIjcGhvbmVJbnB1dFwiKS5jc3MoXCJib3JkZXItY29sb3JcIixcIiM3OGJmOTVcIik7XHJcbiAgICAgICAgICAgICAgICQoXCIjcGhvbmVJbnB1dFwiKS5wYXJlbnQoKS5maW5kKFwidWwuZm9ybS1maWVsZC1lcnJvcnNcIikucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKFwia2V5dXBcIixcIiNwYXltZW50U3RlcElucHV0XCIsZnVuY3Rpb24oZSl7XHJcbiAgICAgIFxyXG4gICAgICAgICAgICAkKFwiLmNoZWNrb3V0LWZvcm0gLmZvcm0tYm9keSBbZGF0YS10ZXN0PXJlZGVlbWFibGUtY29sbGFwc2FibGVdIGlucHV0W25hbWU9Y291cG9uXVwiKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgdmFyIGlucHV0ID0gJCgnI3BheW1lbnRTdGVwSW5wdXQnKS52YWwoKTtcclxuICAgICAgICAgICAgICBpZigkKHRoaXMpLnZhbCgpICE9IGlucHV0KXtcclxuICAgICAgICAgICAgJChcImlucHV0W25hbWU9Y291cG9uXVwiKS5yZW1vdmVBdHRyKFwiY2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgJChcImlucHV0W25hbWU9Y291cG9uXVwiKS5yZW1vdmVDbGFzcyhcImNoZWNrZWRcIik7XHJcbiAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgIGlmKGlucHV0ID09ICQodGhpcykudmFsKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJjaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cihcImNoZWNrZWRcIix0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pIFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKFwia2V5dXBcIixcIiNjYXJ0TGF5b3V0SW5wdXRcIixmdW5jdGlvbihlKXtcclxuICAgICAgXHJcbiAgICAgICAgICAgICQoXCIubGF5b3V0LWNhcnQgW2RhdGEtdGVzdD1yZWRlZW1hYmxlLWNvbGxhcHNhYmxlXSBpbnB1dFtuYW1lPWNvdXBvbl1cIikuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgIHZhciBpbnB1dCA9ICQoJyNjYXJ0TGF5b3V0SW5wdXQnKS52YWwoKTtcclxuICAgICAgICAgICAgICBpZigkKHRoaXMpLnZhbCgpICE9IGlucHV0KXtcclxuICAgICAgICAgICAgJChcImlucHV0W25hbWU9Y291cG9uXVwiKS5yZW1vdmVBdHRyKFwiY2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgJChcImlucHV0W25hbWU9Y291cG9uXVwiKS5yZW1vdmVDbGFzcyhcImNoZWNrZWRcIik7XHJcbiAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBpZihpbnB1dCA9PSAkKHRoaXMpLnZhbCgpKXtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwiY2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoXCJjaGVja2VkXCIsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSBcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbihcImtleXVwXCIsXCIjbW9iaWxlTGF5b3V0SW5wdXRcIixmdW5jdGlvbihlKXtcclxuICAgICAgXHJcbiAgICAgICAgICAgICQoXCIuUmVhY3RNb2RhbFBvcnRhbCBbZGF0YS10ZXN0PXJlZGVlbWFibGUtY29sbGFwc2FibGVdIGlucHV0W25hbWU9Y291cG9uXVwiKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgdmFyIGlucHV0ID0gJCgnI21vYmlsZUxheW91dElucHV0JykudmFsKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIGlmKCQodGhpcykudmFsKCkgIT0gaW5wdXQpe1xyXG4gICAgICAgICAgICAkKFwiaW5wdXRbbmFtZT1jb3Vwb25dXCIpLnJlbW92ZUF0dHIoXCJjaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAkKFwiaW5wdXRbbmFtZT1jb3Vwb25dXCIpLnJlbW92ZUNsYXNzKFwiY2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGlmKGlucHV0ID09ICQodGhpcykudmFsKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJjaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cihcImNoZWNrZWRcIix0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pIFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuICAgIHJlYWR5KHNlbGVjdG9yLCBmbikge1xyXG4gICAgICAgIC8vIFN0b3JlIHRoZSBzZWxlY3RvciBhbmQgY2FsbGJhY2sgdG8gYmUgbW9uaXRvcmVkXHJcbiAgICAgICAgbGlzdGVuZXJzLnB1c2goe1xyXG4gICAgICAgICAgICBzZWxlY3Rvcjogc2VsZWN0b3IsXHJcbiAgICAgICAgICAgIGZuOiBmblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICghb2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgLy8gV2F0Y2ggZm9yIGNoYW5nZXMgaW4gdGhlIGRvY3VtZW50XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIodGhpcy5jaGVjayk7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUoZG9jLmRvY3VtZW50RWxlbWVudCwge1xyXG4gICAgICAgICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc3VidHJlZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGVsZW1lbnQgaXMgY3VycmVudGx5IGluIHRoZSBET01cclxuICAgICAgICB0aGlzLmNoZWNrKCk7XHJcbiAgICB9XHJcbiAgICBjaGVjaygpIHtcclxuICAgICAgICAvLyBDaGVjayB0aGUgRE9NIGZvciBlbGVtZW50cyBtYXRjaGluZyBhIHN0b3JlZCBzZWxlY3RvclxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoLCBsaXN0ZW5lciwgZWxlbWVudHM7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBsaXN0ZW5lciA9IGxpc3RlbmVyc1tpXTtcclxuICAgICAgICAgICAgLy8gUXVlcnkgZm9yIGVsZW1lbnRzIG1hdGNoaW5nIHRoZSBzcGVjaWZpZWQgc2VsZWN0b3JcclxuICAgICAgICAgICAgZWxlbWVudHMgPSBkb2MucXVlcnlTZWxlY3RvckFsbChsaXN0ZW5lci5zZWxlY3Rvcik7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBqTGVuID0gZWxlbWVudHMubGVuZ3RoLCBlbGVtZW50OyBqIDwgakxlbjsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudHNbal07XHJcbiAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIGNhbGxiYWNrIGlzbid0IGludm9rZWQgd2l0aCB0aGUgXHJcbiAgICAgICAgICAgICAgICAvLyBzYW1lIGVsZW1lbnQgbW9yZSB0aGFuIG9uY2VcclxuICAgICAgICAgICAgICAgIGlmICghZWxlbWVudC5yZWFkeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVhZHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEludm9rZSB0aGUgY2FsbGJhY2sgd2l0aCB0aGUgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyLmZuLmNhbGwoZWxlbWVudCwgZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2V0TmF0aXZlVmFsdWUoZWxlbWVudCwgdmFsdWUpIHtcclxuICAgICAgICBjb25zdCB2YWx1ZVNldHRlciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZWxlbWVudCwgJ3ZhbHVlJykuc2V0O1xyXG4gICAgICAgIGNvbnN0IHByb3RvdHlwZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihlbGVtZW50KTtcclxuICAgICAgICBjb25zdCBwcm90b3R5cGVWYWx1ZVNldHRlciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocHJvdG90eXBlLCAndmFsdWUnKS5zZXQ7XHJcbiAgICAgIFxyXG4gICAgICAgIGlmICh2YWx1ZVNldHRlciAmJiB2YWx1ZVNldHRlciAhPT0gcHJvdG90eXBlVmFsdWVTZXR0ZXIpIHtcclxuICAgICAgICAgICAgcHJvdG90eXBlVmFsdWVTZXR0ZXIuY2FsbChlbGVtZW50LCB2YWx1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFsdWVTZXR0ZXIuY2FsbChlbGVtZW50LCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBnZXRDb3Vwb25zKGdyb3VwSUQsIHNlbGVjdG9yRGl2KXtcclxuICAgICAgICAkLmFqYXhcclxuICAgICAgICAgICAgICAgICh7IFxyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9iZy1zeW5jLWFwaS1kZXYua2FwaXZhLmluL2FwaS9jb3Vwb24ucGhwXCIsXHJcbiAgICAgICAgICAgICAgICBhc3luYzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOnsnZ2lkJyA6IGdyb3VwSUR9LFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY291cG9uQmxvY2s9JzxkaXYgY2xhc3M9XCJjb3Vwb24tbGlzdFwiPic7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhWydzdGF0dXMnXSAhPSAnZmFpbCcpe1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wO2k8ZGF0YVsnZGF0YSddLmxlbmd0aDtpKyspXHJcbiAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgY291cG9ucz1kYXRhWydkYXRhJ11baV07XHJcbiAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IG1vbWVudChjb3Vwb25zWydleHBpcmVzJ10pLmZvcm1hdCgnTU0vREQvWVlZWSBoOm1tIGEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGR0PW5ldyBEYXRlKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY3VycmVudERhdGU8ZHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY291cG9uQmxvY2srPSc8bGk+PGxhYmVsIGNsYXNzPVwiY29kZV9pbnB1dFwiPjxzdHJvbmc+Jytjb3Vwb25zWydjb2RlJ10rJzwvc3Ryb25nPjxicj5TYXZlICcrY291cG9uc1snYW1vdW50J10rJyA8YnI+RXhwaXJlcyBvbiA6ICcrdmFsdWUrJyAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIHZhbHVlPVwiJytjb3Vwb25zWydjb2RlJ10rJ1wiIG5hbWU9XCJjb3Vwb25cIj4gPHNwYW4gY2xhc3M9XCJjaGVja21hcmtcIj48L3NwYW4+PC9sYWJlbD48L2xpPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb3Vwb25CbG9jays9XCI8L2Rpdj5cIjtcclxuICAgICAgICAgICAgICAgIC8vIHZhciBzZWxlY3RvckRpdj0kKCdbZGF0YS10ZXN0PXJlZGVlbWFibGUtY29sbGFwc2FibGVdJyk7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RvckRpdi5maW5kKFwiLmNvdXBvbi1saXN0XCIpLnJlbW92ZSgpXHJcbiAgICAgICAgICAgICAgIHNlbGVjdG9yRGl2LmFwcGVuZChjb3Vwb25CbG9jayk7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgIFxyXG5cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9